[{"__type__":"cc.EffectAsset","_name":"bloomBlur","properties":{"texture":{"type":13,"value":null}},"techniques":[{"passes":[{"cullMode":0,"program":"5ab10251387dfd2015c7587115276afc4f3439f1b75fea8a401038aa"}],"layer":0,"stages":["opaque"],"queue":0,"priority":0}],"shaders":[{"vert":"#define _IS_VERT_SHADER 1\n\n  uniform mat4 cc_matViewProj;\n  uniform mat4 cc_matWorld;\n\n  attribute vec3 a_position;\n  attribute mediump vec2 a_uv0;\n  varying mediump vec2 v_uv0;\n\n  void main () {\n    mat4 mvp = cc_matViewProj * cc_matWorld;\n    v_uv0 = a_uv0;\n    gl_Position = mvp * vec4(a_position, 1);\n  }\n\n","frag":"#define _IS_FRAG_SHADER 1\n\n  uniform sampler2D texture;\n  uniform vec4 params; \n  uniform vec4 weights;\n\n  varying mediump vec2 v_uv0;\n\n  void main () {\n    vec2 uv = vec2(v_uv0.x, 1.0 - v_uv0.y);\n    vec3 result = texture2D(texture, uv).rgb * params.w; \n    if (params.z > 0.5) {\n      result += texture2D(texture, uv + vec2(params.x * 1.5, 0.0)).rgb * weights.x;\n      result += texture2D(texture, uv - vec2(params.x * 1.5, 0.0)).rgb * weights.x;\n      result += texture2D(texture, uv + vec2(params.x * 3.5, 0.0)).rgb * weights.y;\n      result += texture2D(texture, uv - vec2(params.x * 3.5, 0.0)).rgb * weights.y;\n      result += texture2D(texture, uv + vec2(params.x * 5.5, 0.0)).rgb * weights.z;\n      result += texture2D(texture, uv - vec2(params.x * 5.5, 0.0)).rgb * weights.z;\n      result += texture2D(texture, uv + vec2(params.x * 7.5, 0.0)).rgb * weights.w;\n      result += texture2D(texture, uv - vec2(params.x * 7.5, 0.0)).rgb * weights.w;\n    } else {\n      result += texture2D(texture, uv + vec2(0.0, params.y * 1.5)).rgb * weights.x;\n      result += texture2D(texture, uv - vec2(0.0, params.y * 1.5)).rgb * weights.x;\n      result += texture2D(texture, uv + vec2(0.0, params.y * 3.5)).rgb * weights.y;\n      result += texture2D(texture, uv - vec2(0.0, params.y * 3.5)).rgb * weights.y;\n      result += texture2D(texture, uv + vec2(0.0, params.y * 5.5)).rgb * weights.z;\n      result += texture2D(texture, uv - vec2(0.0, params.y * 5.5)).rgb * weights.z;\n      result += texture2D(texture, uv + vec2(0.0, params.y * 7.5)).rgb * weights.w;\n      result += texture2D(texture, uv - vec2(0.0, params.y * 7.5)).rgb * weights.w;\n    }\n    gl_FragColor = vec4(result, 1);\n  }\n\n","defines":[],"uniforms":[{"name":"texture","type":13,"defines":[]},{"name":"params","type":7,"defines":[]},{"name":"weights","type":7,"defines":[]}],"attributes":[{"name":"a_position","type":6,"defines":[]},{"name":"a_uv0","type":5,"defines":[]}],"extensions":[],"name":"5ab10251387dfd2015c7587115276afc4f3439f1b75fea8a401038aa"}]},{"__type__":"cc.Material","_name":"bloomCut","_effectAsset":{"__uuid__":"611UuljkxOoK3yRyMDcfL+"},"_defines":{},"_props":{}},{"__type__":"cc.EffectAsset","_name":"bloomCut","properties":{"texture":{"type":13,"value":null}},"techniques":[{"passes":[{"cullMode":0,"blend":true,"program":"e56437441277aece85501798a2b3e8d8b33d21dd44093a8885a5e28d"}],"layer":0,"stages":["opaque"],"queue":0,"priority":0}],"shaders":[{"vert":"#define _IS_VERT_SHADER 1\n\n  uniform mat4 cc_matViewProj;\n  uniform mat4 cc_matWorld;\n\n  attribute vec3 a_position;\n  attribute mediump vec2 a_uv0;\n  varying mediump vec2 v_uv0;\n\n  void main () {\n    mat4 mvp = cc_matViewProj * cc_matWorld;\n    v_uv0 = a_uv0;\n    gl_Position = mvp * vec4(a_position, 1);\n  }\n\n","frag":"#define _IS_FRAG_SHADER 1\n\n  uniform sampler2D texture;\n  varying mediump vec2 v_uv0;\n\n  void main () {\n    vec4 color = texture2D(texture, vec2(v_uv0.x, 1.0 - v_uv0.y));\n    float brightness = dot(color.rgb, vec3(0.2126, 0.7152, 0.0722));\n    \n    if (brightness > 0.3) gl_FragColor = color;\n    else gl_FragColor = vec4(0);\n  }\n\n","defines":[],"uniforms":[{"name":"texture","type":13,"defines":[]}],"attributes":[{"name":"a_position","type":6,"defines":[]},{"name":"a_uv0","type":5,"defines":[]}],"extensions":[],"name":"e56437441277aece85501798a2b3e8d8b33d21dd44093a8885a5e28d"}]},{"__type__":"cc.EffectAsset","_name":"bloomBlend","properties":{"origin":{"type":13,"value":null},"blurred":{"type":13,"value":null},"vignette":{"type":4,"value":0.5}},"techniques":[{"passes":[{"cullMode":0,"blend":true,"blendSrc":1,"blendDst":771,"blendSrcAlpha":1,"blendDstAlpha":771,"program":"ea924808355e863f6ac613f1146e6ad08734ad3d768c44e984d9185d"}],"layer":0,"stages":["opaque"],"queue":0,"priority":0}],"shaders":[{"vert":"#define _IS_VERT_SHADER 1\n\n  uniform mat4 cc_matViewProj;\n  uniform mat4 cc_matWorld;\n\n  attribute vec3 a_position;\n  attribute mediump vec2 a_uv0;\n  varying mediump vec2 v_uv0;\n\n  void main () {\n    mat4 mvp = cc_matViewProj * cc_matWorld;\n    v_uv0 = a_uv0;\n    gl_Position = mvp * vec4(a_position, 1);\n  }\n\n","frag":"#define _IS_FRAG_SHADER 1\n\n  uniform sampler2D origin;\n  uniform sampler2D blurred;\n\n  uniform vec3 resolution; \n  uniform float vignette;\n\n  varying mediump vec2 v_uv0;\n  \n  \n\nvec3 gammaToLinearSpaceRGB(in vec3 sRGB) { \n  return sRGB * (sRGB * (sRGB * 0.305306011 + 0.682171111) + 0.012522878);\n}\n\nvec3 linearToGammaSpaceRGB(in vec3 RGB) { \n  vec3 S1 = sqrt(RGB);\n  vec3 S2 = sqrt(S1);\n  vec3 S3 = sqrt(S2);\n  return 0.585122381 * S1 + 0.783140355 * S2 - 0.368262736 * S3;\n}\n\nvec4 gammaToLinearSpaceRGBA(in vec4 sRGBA) {\n  return vec4(gammaToLinearSpaceRGB(sRGBA.rgb), sRGBA.a);\n}\n\nvec4 linearToGammaSpaceRGBA(in vec4 RGBA) {\n  return vec4(linearToGammaSpaceRGB(RGBA.rgb), RGBA.a);\n}\n\nvec4 linearToLinear (in vec4 value) {\n  return value;\n}\n\n#if INPUT_IS_GAMMA\n  #define TEXEL_TO_LINEAR gammaToLinearSpaceRGBA\n#else\n  #define TEXEL_TO_LINEAR linearToLinear\n#endif\n\n#if OUTPUT_TO_GAMMA\n  #define LINEAR_TO_OUTPUT_TEXEL linearToGammaSpaceRGBA\n#else\n  #define LINEAR_TO_OUTPUT_TEXEL linearToLinear\n#endif\n\n  void main () {\n    vec4 o = texture2D(origin, vec2(v_uv0.x, 1.0 - v_uv0.y));\n    vec4 b = texture2D(blurred, vec2(v_uv0.x, 1.0 - v_uv0.y));\n    vec3 c = o.rgb + b.rgb;\n    c /= c + vec3(1.0);\n\n\t  vec2 uv = gl_FragCoord.xy / resolution.xy;\n    vec2 coord = (v_uv0 - 0.5) * resolution.z * 2.0;\n    float rf = sqrt(dot(coord, coord)) * vignette;\n    float rf2_1 = rf * rf + 1.0;\n    float e = 1.0 / (rf2_1 * rf2_1);\n\n    gl_FragColor = LINEAR_TO_OUTPUT_TEXEL(vec4(c * e, 1));\n  }\n\n","defines":[{"name":"INPUT_IS_GAMMA","type":"boolean","defines":[]},{"name":"OUTPUT_TO_GAMMA","type":"boolean","defines":[]}],"uniforms":[{"name":"origin","type":13,"defines":[]},{"name":"blurred","type":13,"defines":[]},{"name":"resolution","type":6,"defines":[]},{"name":"vignette","type":4,"defines":[]}],"attributes":[{"name":"a_position","type":6,"defines":[]},{"name":"a_uv0","type":5,"defines":[]}],"extensions":[],"name":"ea924808355e863f6ac613f1146e6ad08734ad3d768c44e984d9185d"}]},{"__type__":"cc.Material","_name":"bloomBlurV","_effectAsset":{"__uuid__":"00+HDVY4pKt7kgV9Sn8hqk"},"_defines":{},"_props":{}},{"__type__":"cc.Material","_name":"bloomBlend","_effectAsset":{"__uuid__":"98iPwOhDtHVYbZhM2RSBs7"},"_defines":{},"_props":{}},{"__type__":"cc.Material","_name":"bloomBlurH","_effectAsset":{"__uuid__":"00+HDVY4pKt7kgV9Sn8hqk"},"_defines":{},"_props":{}}]